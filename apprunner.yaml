version: 1.0
runtime: docker

# Використовуємо існуючий Dockerfile
build:
  command: |
    docker build -t cyber-slots-app .

run:
  runtime-version: 21
  # Використовуємо порт 8080, як вказано в Dockerfile
  port: 8080

  env:
    - name: REDIS_HOST
      value: "${REDIS_HOST}"
    - name: REDIS_PORT
      value: "${REDIS_PORT}"
    - name: REDIS_PASSWORD
      value: "${REDIS_PASSWORD}"
    - name: SPRING_PROFILES_ACTIVE
      value: "prod"

instance:
  cpu: 1
  memory: 2048

health_check:
  path: /actuator/health
  interval: 10
  timeout: 5
  healthy_threshold: 2
  unhealthy_threshold: 3